<!-- FIXME: В submit 'Опубликовать' используется слишком много проверок, одна в хелпере - результат записывается в класс submit, а вторая в конце. Все это нужно проверить и переписать -->

<div id="frame" class="frame-admin">
	<div class="cap">
		&ldquo;<%= @company.name %>&rdquo;, кол-во вакансий - <%= @company.vacancies.count %>
	</div>
<%# @message %>
	<div class="boxed">
		<%= form_for([:admin, :companies, @vacancy], :html => {:class => "standart_form"}) do |f| %>
			<div class='item'>
				<%= label_tag "Статус вакансии" %>
				<div class='field'>
					<i><%= @vacancy.human_state_name %></i>
				</div>
			</div>
			<div class='item'>
				<%= label_tag "Статус компании" %>
				<div class='field'>
					<i><%= @company.human_state_name %></i>
				</div>
			</div>

			<span class="line-bottom line-bottom-company"></span>

			<%= render :partial => "employer/vacancies/form", :locals => { :f => f } %>

			<span class="line-bottom line-bottom-company"></span>

			<h2>Сообщение от модератора</h2>
			<%= text_area_tag 'body_letter', nil, :class => "body_letter" %>

			<span class="line-bottom line-bottom-company"></span>

			<div id="button-bottom">
				<%= f.submit "Опубликовать", :class => helpers_class(@company), :name => "published" unless @vacancy.published? %>
				<%= f.submit "Обновить", :class => "input-sub btn save-as", :name => "update" %>

				<%= f.submit "Удалить", :class => "input-sub btn save-as", :name => "destroy",  :confirm => 'Вы, уверены, что хотите удалить вакансию?' %>
				<%= f.submit "Отклонить", :id => "btn-cancel", :class => "input-sub btn btn-danger", :name => "reject",  :confirm => 'Вы, уверены, хотите отменить вакансию?' unless @vacancy.rejected? %>
			</div>	

		<% end %>
		<div class="clear"></div>
	</div> <!-- boxed -->
</div> <!-- #frame -->
<%= render :partial => "admin/companies/navbar_company"%>